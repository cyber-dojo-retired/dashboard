
server
{
    listen 80;
    server_name  localhost;

    # Path for static files
    root /usr/share/nginx/html;

    location /dashboard/show/assets/app.js {
      rewrite ^/dashboard/(.*) /assets/app.js break;
      proxy_pass http://dashboard-server:4527;
    }

    location /dashboard/show/assets/app.css {
      rewrite ^/dashboard/(.*) /assets/app.css break;
      proxy_pass http://dashboard-server:4527;
    }

    location /dashboard/ {
      rewrite ^/dashboard/(.*) /$1 break;
      proxy_pass http://dashboard-server:4527;
    }

    #- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    # Try to serve static files from nginx.

    location /  {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_set_header Host $http_host;
      proxy_redirect off;
      if (!-f $request_filename) {
        proxy_pass http://dashboard-server:4527;
        break;
      }
    }
}
