<script>
/*global cd,$*/
'use strict';
$(() => {

  const initially = cd.urlParam('auto_refresh', 'true');
  const checkBox = $('#auto-refresh-checkbox');

  cd.createTip($('#auto-refresh-wrapper'), "toggle the 10 second<br/>auto-refresh on/off");

  checkBox.isChecked = () => checkBox.prop('checked');
  checkBox.toggle = () => checkBox.prop('checked', !checkBox.isChecked());
  checkBox.onClick = () => {
    if (checkBox.isChecked()) {
      cd.refresh();
    }
  };

  checkBox.attr('checked', initially === 'true')
          .click(() => checkBox.onClick());

  $('#auto-refresh-text').click(() => {
    checkBox.toggle();
    checkBox.onClick();
  });

  cd.autoRefresh = checkBox; // public, heartbeat() needs to get its state

});
</script>

<table id="auto-refresh-wrapper">
  <tr>
    <td>
      <div id="auto-refresh-text">
        auto&nbsp;refresh
      </div>
    </td>
    <td>
      <input type="checkbox" id="auto-refresh-checkbox"/>
      <label for="auto-refresh-checkbox"></label>
    </td>
  </tr>
</table>
